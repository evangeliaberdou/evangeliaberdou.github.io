<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Evangelia">
<meta name="dcterms.date" content="2025-05-25">
<meta name="description" content="Understanding the strengths and limits of tools like ChatGPT for qualitative analysis and why human oversight may be more complicated than you think.">

<title>Home - Using AI for Qualitative Analysis: How Good Is It, What Is It Good For, and Is It Worth the Investment?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/nutshell-1.0.7/nutshell.js"></script>
<script src="../../site_libs/quarto-contrib/nutshell-1.0.7/nutshell_options.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-J5R5L8DP3Q"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-J5R5L8DP3Q', { 'anonymize_ip': true});
</script>


<meta property="og:title" content="Home - Using AI for Qualitative Analysis: How Good Is It, What Is It Good For, and Is It Worth the Investment?">
<meta property="og:description" content="Understanding the strengths and limits of tools like ChatGPT for qualitative analysis and why human oversight may be more complicated than you think.">
<meta property="og:image" content="https://evangeliaberdou.github.io/blog/posts/robot-thirdpost.jpg">
<meta property="og:site_name" content="Home">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Evangelia Berdou</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> <i class="bi bi-lightning-charge-fill" role="img">
</i> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Using AI for Qualitative Analysis: How Good Is It, What Is It Good For, and Is It Worth the Investment?</h1>
  <div class="quarto-categories">
    <div class="quarto-category">AI</div>
    <div class="quarto-category">qualitative data analysis</div>
    <div class="quarto-category">CAQDAS</div>
  </div>
  </div>

<div>
  <div class="description">
    Understanding the strengths and limits of tools like ChatGPT for qualitative analysis and why human oversight may be more complicated than you think.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Evangelia </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 25, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>A question that’s been gaining momentum lately in MEL circles is whether large language models (LLMs) and general-purpose AI tools like ChatGPT can genuinely support qualitative analysis in a way that’s both robust and useful.</p>
<p>This is not a clear-cut issue. Most well-known qualitative analysis software—also referred to as computer-assisted qualitative data analysis software (CAQDAS) in research circles—like NVivo, ATLAS.ti, and MAXQDA, now include AI-based features.</p>
<p>Still, most of the current <a href="#x-buzz">:buzz</a> among qualitative researchers and MEL professionals revolves around the use of general-purpose tools like ChatGPT to handle large-scale qualitative data analysis.</p>
<p>I researched the topic out of personal interest and thought others might benefit from what I found. Specifically:</p>
<ul>
<li>I prioritised recent, independent and openly accessible <a href="#x-grey">:peer-reviewed</a> publications.</li>
<li>I focused on tasks directly related to the qualitative analysis process, so I did not cover more general functions, such as transcription or translation that can speed up the analysis or writing.</li>
<li>Although I enjoy experimenting with new tools, including AI, I am writing this primarily from the perspective of a social scientist.</li>
</ul>
<p>I am listing the articles I read at the end of the post.</p>
<section id="x-buzz" class="level2">
<h2 class="anchored" data-anchor-id="x-buzz">:x-buzz</h2>
<p>For a more critical perspective on AI’s potential to advance science, I encourage you to read this article by <a href="https://www.understandingai.org/p/i-got-fooled-by-ai-for-science-hypeheres">Nick McGreivy</a>.</p>
</section>
<section id="x-grey" class="level2">
<h2 class="anchored" data-anchor-id="x-grey">:x-grey</h2>
<p>I’m not wedded to peer-reviewed sources, but a lot of the grey literature I found was vendor-backed or anecdotal in nature.</p>
</section>
<section id="gains-what-ai-does-well" class="level1">
<h1>Gains: What AI Does Well</h1>
<p>Used appropriately, AI can be genuinely useful during the early and more routine parts of qualitative research:</p>
<ul>
<li><strong>Speed and scale</strong>: AI works fast. One study showed a GPT model analyzing 63 UN policy documents, generating over 700 distinct codes in far less time than it would’ve taken a human team.</li>
<li><strong>Summarisation</strong>: ChatGPT is quite good at distilling long documents and highlighting key points. But, as the next section touches on, quality and accuracy can vary and need checking.</li>
<li><strong>Coding</strong>: There’s broad agreement that AI is decent at generating first-pass codes, spotting emerging themes, and seeing if they <a href="#x-align">:align</a> with the research questions.</li>
<li><strong>Consistency</strong>: In one study using ChatGPT to analyze Japanese transcripts, the AI aligned with human coders more than 83% of the time—when dealing with clearly defined, descriptive content. The consistency dropped sharply for more abstract, interpretive themes.</li>
</ul>
<section id="x-align" class="level2">
<h2 class="anchored" data-anchor-id="x-align">:x-align</h2>
<p>As one researcher pointed out, this often comes down to the quality of the prompts humans give, not how well the AI can independently validate themes or codes.</p>
</section>
</section>
<section id="challenges-machine-troubles" class="level1">
<h1>Challenges: Machine Troubles</h1>
<p>These are the areas where AI falters:</p>
<ul>
<li><p><strong>Interpretive depth</strong>: ChatGPT often stays surface-level. It has trouble tying meaning to context or recognizing contradictions, irony, or cultural cues. This stems both from its design limitations and sometimes from users not knowing how to guide it.</p></li>
<li><p><strong>Quoting errors</strong>: AI has a bad habit of fabricating or paraphrasing quotes instead of pulling them directly—risky if you don’t catch it.</p></li>
<li><p><strong>Cultural and emotional context</strong>: In one notable case where ChatGPT was used to analyse Japanese interview transcripts, the AI couldn’t grasp emotional themes like “fate” or “sacred moments”. Agreement with humans dropped under 30%. As LLMs are trained primarily on online texts, it is reasonable to expert that they will not perform equally well in less prevalent languages. They would know much less about Japanese than they would know about English and the worlds these languages represent, as there are fewer online Japanese texts.</p></li>
<li><p><strong>Prompt sensitivity</strong>: Your phrasing matters. In one example, AI responses mirrored the researchers’ prompts more than the actual data—an issue of “contamination.”</p></li>
<li><p><strong>Reproducibility</strong>: Results varied across sessions even with similar inputs. While reproducibility is a human challenge too, this inconsistency raises flags.</p></li>
<li><p><strong>Misapplication of qualitative data analysis methods</strong>: AI sometimes distorts or simplifies established methods, especially if not carefully prompted.</p></li>
<li><p><strong>Lack of transparency</strong>: It’s often unclear how AI derives at its codes or themes or arrives at certain conclusions. It’s reasoning process is a bit of a <a href="#x-box">:black box</a>.</p></li>
<li><p><strong>Ethical concerns</strong>: Using cloud-based LLMs for sensitive data brings real risks around privacy and consent, which is why there is a growing trend for localised LLMs. Token limits and memory issues were cited as bottleneck in tools like ChatGPT, but these are constantly improving.</p></li>
</ul>
<section id="x-box" class="level2">
<h2 class="anchored" data-anchor-id="x-box">:x-box</h2>
<p>This challenge isn’t unique to qualitative work—we don’t fully know how LLMs ‘think’ in general.</p>
</section>
</section>
<section id="emerging-consensus-hybrid-ai-human-models-work-best" class="level1">
<h1>Emerging Consensus: Hybrid AI-Human Models Work Best</h1>
<p>Across the literature, the most promising approach is not replacing human analysts—but combining their strengths with AI’s efficiency. This involves:</p>
<ul>
<li><strong>Letting AI handle the more mechanical tasks</strong>: Some aspects of analysis such as summation, first-level coding, and identifying patterns between themes or codes —can be sped up by AI, freeing up human attention for more nuanced work.</li>
<li><strong>Human oversight and judgment throughout:</strong>
<ul>
<li><strong>Design</strong>: Humans need to provide AI with details on the context of the analysis and the preferred analytical approach, as well as step-by-step instructions on how to implement it. They need to translate, essentially, the knowledge that qualitative researchers acquire through formal training and experience into prompts and workflow that the AI can implement. This necessitates collaboration between AI experts and qualitative researchers.</li>
<li><strong>Redressing biases and validating process and results:</strong> Humans must verify that AI performs as instructed (even on mechanical tasks) and address inherent biases, such as those related to gender, race, and age, among others that are inherent to LLMs. In addition to addressing glaring errors, they need to help AI refine its approach iteratively.</li>
<li><strong>Interpretation.</strong> The consensus is that humans are best placed when it comes to interpreting findings through theory, context, and personal experience.</li>
</ul></li>
</ul>
</section>
<section id="why-cqdas-still-matters" class="level1">
<h1>Why CQDAS still matters</h1>
<p>Pre-AI CAQDAS such as NVivo, ATLAS.ti, MAXQDA have <strong>evolved</strong> over <strong>decades</strong> of <strong>interaction</strong> with <strong>qualitative researchers</strong>. They incorporate tacit knowledge about coding hierarchies, memoing, traceability, and collaborative workflows. Many now include AI features—but crucially, these are meant to housed within systems that are already designed to support analytical rigour based on principles developed <em>with</em> social scientists—not retrofitted for them. I hope that their newer AI features (e.g.&nbsp;auto-coding in NVivo) are embedded in ways that maintain methodological integrity from the ground up: from coding hierarchies and memos to audit trails and team coding capabilities.</p>
</section>
<section id="caveats-for-investment-hidden-efficiency-costs" class="level1">
<h1>Caveats for Investment: Hidden Efficiency Costs</h1>
<p>My review suggests LLMs can help us work more efficiently, manage larger datasets, and reduce the time spent on repetitive tasks. The hope is that because of their limitations, LLMs are not likely to replace human researchers.</p>
<p>This tracks with my own experience that AI performs best when you treat it as an <strong>inexperienced research assistant</strong> who:</p>
<ul>
<li>Is helpful, quick, and surprisingly competent in some areas;</li>
<li>Requires detailed instructions and significant oversight at every step;</li>
<li>Lacks the experience and knowledge for critical, nuanced analysis.</li>
</ul>
<p>However, <strong>training</strong> this assistant represents a <strong>non-trivial time investment</strong> that is poorly understood. If this training can be leveraged in future projects, this initial investment would, by all means, be worthwhile. However, (and this is where conceptualising AI as an inexperienced assistant starts to get problematic), this assumes that:</p>
<ul>
<li>You will <strong>continue to use the same analytical approach,</strong> such as content analysis or thematic analysis and a similar workflow (how you load documents and feed AI your prompts, organise your coding, the points where you perform your checks, etc.)</li>
<li>The <strong>evidence base, unit and granularity of analysis for new projects will be comparable to the original one</strong>. Will your AI, which you trained to analyse transcripts from individual interviews, perform equally well, out-of-the-box, when you ask it to analyse transcripts from focus group discussions, pod-casts, policy documents or social media posts?</li>
<li>You will need to <strong>redress similar biases in the LLM and the prompting</strong>.</li>
<li>More generally, <strong>transferable lessons can be distinguished from project-specific instructions</strong> over multiple cycles of iteration.</li>
<li>Your <strong>prompts and processes will yield similar results across updated versions of AI models,</strong> unless you have control over model versioning or opt for local models.</li>
</ul>
<p>You can, of course, choose to use AI strategically only for certain aspects of the analysis, rather than integrating it throughout the entire analytical process. However, most use cases and conversations focus on the second scenario.</p>
<p>Another important aspect of training concerns the <strong>level at which you instruct your AI</strong> (what AI are you dealing with). There’s a difference between <strong>customising</strong> the core operating system—<strong>the underlying LLM</strong>—and tweaking the user-facing app built on top of it, like a particular ChatGPT interface. Messing with the operating system requires technical expertise and affects everything downstream, while adjusting the app is more about user preferences and workflows.</p>
</section>
<section id="a-closing-reflection" class="level1">
<h1>A Closing Reflection</h1>
<p>One under-explored <strong>potential of AI</strong> that I find particularly exciting is its role in <strong>triangulation and validation</strong>, and more broadly, in making qualitative analysis more <strong>transparent</strong>.</p>
<p>Quality assurance in qualitative research is time-consuming and methodologically challenging. And let’s face it — human-led qualitative analysis can be just as much of a black box as AI-driven approaches.</p>
<p>AI offers a real opportunity to change this by:</p>
<ul>
<li><p><strong>Systematically documenting</strong> key analytical decisions and processes.</p></li>
<li><p><strong>Enabling deeper engagement</strong> not only with results but with often-overlooked aspects of the analysis — such as research resign and sampling, emergent themes and codebooks— that tend to be buried in annexes or footnotes.</p></li>
</ul>
<p>This opens up opportunities for a better collective understanding of how findings emerge—not just what they are, and the parameters for their interpretation.</p>
</section>
<section id="articles-reviewed" class="level1">
<h1>Articles Reviewed</h1>
<ol type="1">
<li>Bijker, R., Merkouris, S. S., Dowling, N. A., &amp; Rodda, S. N. (2024). ChatGPT for Automated Qualitative Research: Content Analysis. Journal of Medical Internet Research, 26, e59050. https://doi.org/10.2196/59050</li>
<li>Hitch, D. (2024). Artificial Intelligence Augmented Qualitative Analysis: The Way of the Future? Qualitative Health Research, 34(7), 595–606. https://doi.org/10.1177/10497323231217392</li>
<li>Kondo, T., Miyachi, J., Jönsson, A., &amp; Nishigori, H. (2024). A mixed-methods study comparing human-led and ChatGPT-driven qualitative analysis in medical education research (No.&nbsp;4). Nagoya University Graduate School of Medicine, School of Medicine. https://doi.org/10.18999/nagjms.86.4.620</li>
<li>Mayring, P. (2025). Qualitative Content Analysis With ChatGPT: Pitfalls, Rough Approximations and Gross Errors. A Field Report. Forum: Qualitative Social Research/Qualitative Sozialforschung, 26(1). https://www.qualitative-research.net/index.php/fqs/article/download/4252/5159?inline=1</li>
<li>Paoli, S. D. (2024). Further Explorations on the Use of Large Language Models for Thematic Analysis: Open-Ended Prompts, Better Terminologies and Thematic Maps. Forum Qualitative Sozialforschung / Forum: Qualitative Social Research, 25(3), Article 3. https://doi.org/10.17169/fqs-25.3.4196</li>
<li>Sakaguchi, K., Sakama, R., &amp; Watari, T. (2025). Evaluating ChatGPT in Qualitative Thematic Analysis With Human Researchers in the Japanese Clinical Context and Its Cultural Interpretation Challenges: Comparative Qualitative Study. Journal of Medical Internet Research, 27, e71521. https://doi.org/10.2196/71521</li>
<li>Şen, M., Şen, Ş. N., &amp; Şahin, T. G. (2023). A New Era for Data Analysis in Qualitative Research: ChatGPT! Shanlax International Journal of Education, 11(S1-Oct), 1–15. https://doi.org/10.34293/education.v11iS1-Oct.6683</li>
<li>Turobov, A., Coyle, D., &amp; Harding, V. (2024). Using ChatGPT for Thematic Analysis (No.&nbsp;arXiv:2405.08828). arXiv. https://doi.org/10.48550/arXiv.2405.08828</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Made with ❤️ and Quarto</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>